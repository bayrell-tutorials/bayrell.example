<!DOCTYPE html>
<html>
<head>
<title>Index</title>
</head>
<body>

<div class='root'></div>

<script src="/js/runtime.js"></script>
<script src="/js/app.js"></script>

<script>

function runApp()
{
	/* Create context */
	var context = Runtime.Core.Context.create(null, Runtime.Dict.from({}));

	/* Set context params */
	context = context.copy(context, {
		"start_time": Date.now(),
	});

	/* Set entry point */
	context = context.constructor.setMainModule(context, context, "App");
	
	/* Set global context */
	Runtime.RuntimeUtils.setContext(context);

	/* Run app */
	(async () => {
		try
		{
			/* Run entry */
			context = await context.constructor.run
			(
				context,
				context,
				
				/* Before start */
				async (ctx, c) =>
				{
					/* Set global route prefix */
					c = Runtime.rtl.setAttr(c, c, ["settings", "config", "Runtime.Web", "route_prefix"], "");
					return c;
				},
				
				/* Before run */
				async (ctx, c) =>
				{
					/* Set global context */
					window["globalContext"] = c;
					Runtime.RuntimeUtils.setContext(c);
					return c;
				}
			);
		}
		catch (e)
		{
			console.log( e.stack );
		}
	})();
	
	return context;
}

runApp();

</script>

</body>
</html>